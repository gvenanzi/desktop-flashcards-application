<section>
  <app-back-navigation-btn (onBackClicked)="onBackClick()"/>
  <app-toggle-theme-btn/>

  <div class="mx-auto max-w-screen-xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8">
    @if (collection){
      <header class="text-center">
        <h2 class="text-xl font-bold sm:text-6xl">{{ collection.name | titlecase }}</h2>

        <p class="mx-auto mt-4 max-w-md">
          {{ collection.description | titlecase }}
        </p>
      </header>

      <ul class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
        <li class="h-full">
          <a routerLink="createFlashcard" class="group block overflow-hidden h-full">
            <div class="rounded-lg p-6 shadow bg-zinc-500 text-gray-300 dark:bg-gray-300 dark:text-gray-700 h-full flex items-center justify-center text-center">
              <h2 class="text-2xl font-semibold text-stone">Aggiungi flashcard</h2>
            </div>
          </a>
        </li>

        <li class="h-full">
          <a [routerLink]="['/collection', collection.id, 'test']" class="group block overflow-hidden h-full">
            <div class="rounded-lg p-6 shadow bg-zinc-500 text-gray-300 dark:bg-gray-300 dark:text-gray-700 h-full flex items-center justify-center text-center">
              <h2 class="text-2xl font-semibold text-stone">Test</h2>
            </div>
          </a>
        </li>

        <li class="h-full">
          <a (click)="reTestCurrentWrongCards()" class="group block overflow-hidden h-full">
            <div
              [ngClass]="{
                  'bg-zinc-500 dark:bg-gray-300 cursor-pointer': getWrongGuessedFlashcards().length > 0,
                  'bg-gray-400 text-slate-800': getWrongGuessedFlashcards().length <= 0
              }"
              class="rounded-lg p-6 shadow h-full flex items-center justify-center text-center text-gray-300 dark:text-gray-700">
              <h2 class="text-2xl font-semibold">Ripeti errate</h2>
            </div>
          </a>
        </li>

        <li class="h-full">
          <a [routerLink]="['/collection', collection.id, 'flashcardList']" class="group block overflow-hidden h-full">
            <div class="rounded-lg p-6 shadow bg-zinc-500 text-gray-300 dark:bg-gray-300 dark:text-gray-700 h-full flex items-center justify-center text-center">
              <h2 class="text-2xl font-semibold text-stone">Lista flashcards</h2>
            </div>
          </a>
        </li>
      </ul>
    }
  </div>
  <div class="flow-root mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
    <dl
      class="-my-3 divide-y divide-gray-200 rounded border border-gray-200 text-sm *:even:bg-gray-100"
    >
      <div class="grid grid-cols-1 gap-1 p-3 sm:grid-cols-3 sm:gap-4 bg-zinc-500 text-gray-300 dark:bg-gray-300 dark:text-gray-700">
        <dt class="font-medium">Numero flashcards</dt>
        <dd class="sm:col-span-2">{{ flashcardList.length }}</dd>
      </div>

      <div class="grid grid-cols-1 gap-1 p-3 sm:grid-cols-3 sm:gap-4 bg-zinc-500 text-stone-500 dark:bg-gray-300 dark:text-gray-700">
        <dt class="font-medium">Numero errori</dt>
        <dd class="sm:col-span-2">{{ getWrongGuessedFlashcards().length }}</dd>
      </div>

      <div class="grid grid-cols-1 gap-1 p-3 sm:grid-cols-3 sm:gap-4 bg-zinc-500 text-gray-300 dark:bg-gray-300 dark:text-gray-700">
        <dt class="font-medium">Ultimo test</dt>
        <dd class="sm:col-span-2">{{ lastCollectionTest ? (lastCollectionTest.dateTime | date:'medium':'Europe/Rome':'it') : '-' }}</dd>
      </div>

      <div class="grid grid-cols-1 gap-1 p-3 sm:grid-cols-3 sm:gap-4 bg-zinc-500 text-stone-500 dark:bg-gray-300 dark:text-gray-700">
        <dt class="font-medium">Ultimo score rate</dt>
        <dd class="sm:col-span-2">{{ getLastTestScoreRate() }}%</dd>
      </div>

    </dl>
  </div>

</section>
